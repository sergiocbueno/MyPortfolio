function getMapChartByIpAddress(a){$.ajax({type:"POST",url:"/Home/GetMapChartData",data:{ipAddress:a},success:function(a){generateMapChart(a.data,a.apiKey)},error:function(){console.log("An error occurred during the ajax call to generate the chart!")}})}function generateMapChart(a,e){google.charts.load("current",{packages:["map"],mapsApiKey:e}),google.charts.setOnLoadCallback(function(){var e=[["City","Name"]];a.forEach(function(a){var o=[];o.push(a.cityName),o.push(a.message),e.push(o)});var o=google.visualization.arrayToDataTable(e),t=new google.visualization.Map(document.getElementById("chart_div"));t.draw(o,{showTooltip:!0,showInfoWindow:!0,zoomLevel:2,enableScrollWheel:!0}),$("#loading").hide(),$("#mapping").show(),google.visualization.events.addListener(t,"ready",mapReadyHandler)})}function mapReadyHandler(){$("#loading_google_maps").hide()}window.onload=function(){$.getJSON("https://api.ipify.org?format=jsonp&callback=?",function(a){a.ip&&getMapChartByIpAddress(a.ip)})};