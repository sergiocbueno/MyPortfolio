function getMapChartByIpAddress(a){$.ajax({type:"POST",url:"/Home/GetMapChartData",data:{ipAddress:a},success:function(a){generateMapChart(a.data,a.apiKey)},error:function(){console.log("An error occurred during the ajax call to generate the chart!")}})}function generateMapChart(a,o){google.charts.load("current",{packages:["map"],mapsApiKey:o}),google.charts.setOnLoadCallback(function(){var o=[["City","Name"]];a.forEach(function(a){var e=[];e.push(a.cityName),e.push(a.message),o.push(e)});var e=google.visualization.arrayToDataTable(o),t=new google.visualization.Map(document.getElementById("chart_div"));$("#loading").hide(),$("#mapping").show(),t.draw(e,{showTooltip:!0,showInfoWindow:!0,zoom:1,minZoom:1})})}window.onload=function(){$.getJSON("https://api.ipify.org?format=jsonp&callback=?",function(a){a.ip&&getMapChartByIpAddress(a.ip)})};